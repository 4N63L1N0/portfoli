<!--
  Portfolio - index.html
  √âtape : ajout d'un background anim√© et d'animations subtiles pour rendre le site moins plat
  - HTML / CSS / JS pur
  - Animations : gradient anim√©, blobs flottants, parallax l√©ger au survol de la souris, micro-animations sur les cartes
  - Sections: Nav, Hero, Projets (Admin / Cyber), Veille, √Ä propos, Contact, Footer
-->

<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Portfolio ‚Äî BTS SIO</title>
  <meta name="description" content="Portfolio BTS SIO ‚Äî projets, veilles et contact">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#071022; /* base */
      --card:#0b1220;
      --muted:#9aa6b2;
      --accent-from:#5eead4;
      --accent-to:#60a5fa;
      --glass: rgba(255,255,255,0.03);
      --max-width:1100px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}

    /* Background animation container */
    body{
      margin:0;font-family:Inter,system-ui,Arial,sans-serif;color:#e6eef6;line-height:1.5;padding:32px 20px;position:relative;overflow-x:hidden;background:var(--bg);
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
    }

    /* Skip link for accessibility */
    .skip-link{position:absolute;left:8px;top:8px;background:#042033;color:#e6eef6;padding:8px 12px;border-radius:8px;z-index:6;transform:translateY(-120%);transition:transform .22s ease}
    .skip-link:focus{transform:none}

    /* Animated gradient behind content (subtle and slow) */
    .bg-gradient{
      position:fixed;inset:0;z-index:0;pointer-events:none;opacity:0.65;
      background:linear-gradient(120deg, rgba(96,165,250,0.06), rgba(94,234,212,0.04));
      mix-blend-mode:screen;filter:blur(40px);
      animation: gradientShift 18s linear infinite;
    }
    @keyframes gradientShift{
      0%{transform:translate3d(-10%, -5%, 0) scale(1)}
      50%{transform:translate3d(10%, 5%, 0) scale(1.05)}
      100%{transform:translate3d(-10%, -5%, 0) scale(1)}
    }

    /* Floating blurred blobs for depth */
    .bg-blob{position:fixed;border-radius:50%;filter:blur(36px);opacity:0.28;mix-blend-mode:screen;pointer-events:none;z-index:0}
    .blob-1{width:420px;height:420px;left:-120px;top:-80px;background:radial-gradient(circle at 30% 30%,var(--accent-from),transparent 40%)}
    .blob-2{width:360px;height:360px;right:-90px;bottom:-60px;background:radial-gradient(circle at 70% 70%,var(--accent-to),transparent 40%)}
    .blob-3{width:260px;height:260px;left:60%;top:10%;background:radial-gradient(circle at 40% 60%,rgba(255,255,255,0.06),transparent 40%)}
    .bg-blob {animation: floaty 12s ease-in-out infinite}
    @keyframes floaty{0%{transform:translateY(0) translateX(0)}50%{transform:translateY(-18px) translateX(6px)}100%{transform:translateY(0) translateX(0)}}

    /* Content container sits above background */
    .container{max-width:var(--max-width);margin:0 auto;position:relative;z-index:1;padding-top:18px}

    /* NAV - sticky header */
    nav{display:flex;justify-content:space-between;align-items:center;gap:16px;margin-bottom:18px;position:sticky;top:18px;z-index:4;padding:10px 14px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));backdrop-filter: blur(6px);box-shadow:0 8px 24px rgba(2,6,23,0.45)}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent-to),var(--accent-from));display:flex;align-items:center;justify-content:center;font-weight:700;color:#042033}
    .navlinks{display:flex;gap:14px;align-items:center}
    a.navbtn{color:var(--muted);text-decoration:none;padding:8px 12px;border-radius:10px;font-weight:600}
    a.navbtn:hover{color:#fff;background:var(--glass)}
    .cta{padding:8px 14px;background:transparent;border:1px solid rgba(255,255,255,0.06);border-radius:10px}

    /* mobile menu button */
    .menu-btn{display:none;border:none;background:transparent;color:var(--muted);font-weight:700;padding:8px;border-radius:8px}

    /* HERO */
    .hero{display:grid;grid-template-columns:1fr 380px;gap:32px;align-items:center;margin-bottom:44px}
    .hero-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:28px;border-radius:16px;backdrop-filter: blur(8px);box-shadow: 0 10px 30px rgba(2,6,23,0.6);transform-origin:center;transition:transform .25s ease}
    .hero-card:hover{transform:translateY(-6px) scale(1.01)}
    h1{font-size:clamp(28px,4vw,40px);margin:0 0 12px}
    p.lead{color:var(--muted);margin:0 0 18px}
    .hero-actions{display:flex;gap:12px}
    button.primary{background:linear-gradient(90deg,var(--accent-from),var(--accent-to));border:none;padding:10px 16px;border-radius:10px;color:#042033;font-weight:700;cursor:pointer}
    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px 14px;border-radius:10px;color:var(--muted);cursor:pointer}

    /* side profile */
    .profile{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:15px;border-radius:12px;box-shadow:0 8px 20px rgba(2,6,23,0.5)}
    .profile img{width:100%;height:250px;object-fit:cover;border-radius:10px;margin-bottom:12px;transition:transform .45s ease}
    .profile img:hover{transform:scale(1.03) translateY(-6px)}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{background:rgba(255,255,255,0.03);padding:6px 10px;border-radius:999px;font-size:14px;color:var(--muted)}

    /* Projects */
    .projects-heading{display:flex;justify-content:space-between;align-items:center;gap:12px}
    .projects-sub{color:var(--muted);margin:4px 0 12px}

    /* Horizontal scroll row for projects */
    .cards-scroll{display:flex;gap:16px;overflow-x:auto;padding:12px 6px;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch}
    .cards-scroll::-webkit-scrollbar{height:10px}
    .cards-scroll::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.06);border-radius:8px}
    .cards-scroll::-webkit-scrollbar-track{background:transparent}

    .card{background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.01));padding:12px;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.02);transition:transform .35s ease,box-shadow .35s ease,filter .35s ease;min-width:260px;flex:0 0 auto;scroll-snap-align:center}
    .card:hover{transform:translateY(-12px) rotateX(2deg);box-shadow:0 24px 48px rgba(2,6,23,0.7);filter:brightness(1.02)}
    .card img{width:100%;height:140px;object-fit:cover;border-radius:8px}
    .card h3{margin:10px 0 6px;font-size:16px}
    .card p{margin:0;color:var(--muted);font-size:14px}
    .card .meta{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
    .pill{padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.03);font-size:12px;color:var(--muted)}

    /* Keep original grid as fallback for large screens where needed */
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}

    /* Veille (mini blog) */
    .news{display:flex;flex-direction:column;gap:12px}
    .note{background:linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.01));padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}

    /* ABOUT */
    .about-grid{display:grid;grid-template-columns:1fr 360px;gap:20px}

    /* CONTACT */
    form{display:grid;gap:10px}
    input,textarea{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);padding:10px;border-radius:8px;color:#e6eef6}

    footer{margin-top:36px;color:var(--muted);font-size:13px;text-align:center}

    /* responsive */
    @media (max-width:980px){
      .hero{grid-template-columns:1fr;}
      .grid{grid-template-columns:repeat(2,1fr)}
      .about-grid{grid-template-columns:1fr}
    }
    @media (max-width:640px){
      .grid{grid-template-columns:1fr}
      nav{gap:8px}
      .navlinks{display:none}
      .menu-btn{display:inline-flex}
    }

    /* reveal animation */
    .reveal{opacity:0;transform:translateY(16px);transition:opacity .6s ease,transform .6s ease}
    .reveal.show{opacity:1;transform:none}

  </style>
</head>
<body>
  <!-- animated background elements -->
  <div class="bg-gradient" aria-hidden="true"></div>
  <div class="bg-blob blob-1" aria-hidden="true"></div>
  <div class="bg-blob blob-2" aria-hidden="true"></div>
  <div class="bg-blob blob-3" aria-hidden="true"></div>

  <div class="container">
    <nav>
      <div class="brand">
        <div class="logo">AF</div>
        <div>
          <div style="font-weight:700">4N63L1N0‚Äî Portfolio</div>
          <div style="font-size:13px;color:var(--muted)">BTS SIO ‚Äî Solutions d'infrastructure</div>
        </div>
      </div>
      <div style="display:flex;align-items:center;gap:10px">
        <button class="menu-btn" id="menuBtn" aria-label="Ouvrir le menu">‚ò∞</button>
        <div class="navlinks" id="navLinks">
          <a class="navbtn" href="#projects">Projets</a>
          <a class="navbtn" href="#veille">Veille</a>
          <a class="navbtn" href="#about">√Ä propos</a>
          <a class="navbtn" href="#contact">Contact</a>
          <a class="navbtn" href="synthese.html">Tableau de synth√®se</a>
          <a class="navbtn cta" href="#" onclick="downloadCV(event)">T√©l√©charger CV</a>
        </div>
      </div>
    </nav>

    <section class="hero" id="top">
      <div class="hero-card reveal" id="heroCard">
        <h1>Salut ‚Äî Je suis Ang√©lino FERREIRA, apprenti en BTS SIO</h1>
        <p class="lead">Je con√ßois des solutions d‚Äôinfrastructure et des petits outils web. Ici, tu trouveras mes projets, mes veilles technologiques et des d√©monstrations techniques.</p>
        <div class="hero-actions">
          <button class="primary" onclick="document.getElementById('projects').scrollIntoView({behavior:'smooth'})">Voir mes projets</button>
          <button class="secondary" onclick="document.getElementById('contact').scrollIntoView({behavior:'smooth'})">Me contacter</button>
        </div>
        <div style="margin-top:18px;color:var(--muted);font-size:13px">Derni√®re mise √† jour : <strong id="lastUpdate">30 octobre 2025</strong></div>
      </div>

      <aside class="profile reveal" id="profileCard">
        <img id="profileImg" src="Sujet.png" alt="Photo profil">
        <div style="font-weight:700">Ang√©lino</div>
        <div style="color:var(--muted);font-size:14px;margin-bottom:8px">Technicien poste de travail indus ‚Äî BTS SIO (A)</div>
        <div class="chips">
          <div class="chip">HTML</div>
          <div class="chip">CSS</div>
          <div class="chip">Mac OS</div>
          <div class="chip">Linux</div>
          <div class="chip">Windows</div>
          <div class="chip">R√©seaux</div>
          <div class="chip">Cybers√©curit√©</div>
        </div>
      </aside>
    </section>
    <!-- About -->
    <section id="about" style="margin-top:28px">
      <h2 class="reveal">√Ä propos</h2>
      <div class="about-grid" style="margin-top:12px">
        <div class="reveal">
          <p style="color:var(--muted)">Je suis en BTS SIO, option SISR. J'aime concevoir des solutions simples et robustes, automatiser les t√¢ches r√©p√©titives, et partager mes d√©couvertes techniques via des veilles.</p>
          <ul style="color:var(--muted)">
            <li>Comp√©tences : administration Linux, VLAN, scripting, HTML/CSS/JS</li>
            <li>Logiciels : VIF, outils d'administration, Git</li>
          </ul>
        </div>
      </div>
    </section>
    <!-- Projects -->
    <section id="projects">
      <div class="projects-heading">
        <div>
          <h2 class="reveal">Projets</h2>
          <p class="projects-sub reveal">S√©lection de projets ‚Äî tri√©s par discipline : Admin / Infra et Cyber.</p>
        </div>
      </div>

      <!-- Admin / Infra projects (horizontal scroll) -->
      <div style="margin-top:12px">
        <h3 class="reveal">Admin &amp; Infrastructure</h3>
        <p class="projects-sub reveal">Projets portant sur l'administration syst√®me, r√©seaux et d√©ploiement.</p>
        <div class="cards-scroll reveal" id="adminProjects" aria-label="Projets administration">

          <article class="card">
            <img src="https://plus.unsplash.com/premium_photo-1663036532511-0b828f4034fb?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=2072" alt="Remplacement PV1">
            <h3>Remplacement PV1 ‚Üí VIF</h3>
            <p>Migration de l'outil de production, configuration des platines AXEL et segmentation VLAN.</p>
            <div class="meta">
              <div class="pill">Alternance</div>
              <a href="projects/project1.html" class="pill" style="text-decoration:none;color:var(--muted)">Voir ‚Üí</a>
            </div>
          </article>

          <article class="card">
            <img src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=1600&auto=format&fit=crop&ixlib=rb-4.0.3&s=placeholder" alt="Infra 4">
            <h3>D√©ploiement VLAN</h3>
            <p>Guide et scripts pour d√©ployer des VLANs isol√©s en entreprise.</p>
            <div class="meta"><div class="pill">Guide</div><a class="pill" href="projects/project2.html" style="text-decoration:none;color:var(--muted)">Voir ‚Üí</a></div>
          </article>

          <article class="card">
            <img src="https://images.unsplash.com/photo-1542831371-d531d36971e6?q=80&w=1600&auto=format&fit=crop&ixlib=rb-4.0.3&s=placeholder" alt="Dashboard">
            <h3>PROJETS 2</h3>
            <p>Prototype de dashboard de supervision r√©seau avec m√©triques synth√©tiques et alertes.</p>
            <div class="meta">
              <div class="pill">Prototype</div>
              <a href="projects/project3.html" class="pill" style="text-decoration:none;color:var(--muted)">Voir ‚Üí</a>
            </div>
          </article>

          <article class="card">
            <img src="https://images.unsplash.com/photo-1518779578993-ec3579fee39f?q=80&w=1600&auto=format&fit=crop&ixlib=rb-4.0.3&s=placeholder" alt="Automatisation">
            <h3>PROJETS 3</h3>
            <p>Scripts (bash / batch) pour d√©ploiement et configuration initiale d'√©quipements.</p>
            <div class="meta">
              <div class="pill">Outils</div>
              <a href="projects/project4.html" class="pill" style="text-decoration:none;color:var(--muted)">Voir ‚Üí</a>
            </div>
          </article>

          <!-- placeholder extra cards to demonstrate scrolling -->
          

        </div>
      </div>

      <!-- Cyber projects (horizontal scroll) -->
      <div style="margin-top:22px">
        <h3 class="reveal">Projets Cyber</h3>
        <p class="projects-sub reveal">Projets orient√©s s√©curit√© informatique : pentest, audits, hardening.</p>
        <div class="cards-scroll reveal" id="cyberProjects" aria-label="Projets cyber">

          <article class="card">
            <img src="https://plus.unsplash.com/premium_photo-1676618539987-12b7c8a8ae61?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1035" alt="Segmentation">
            <h3>S√©curisation VLANs</h3>
            <p>√âtude sur les bonnes pratiques de segmentation r√©seau pour limiter la surface d'attaque.</p>
            <div class="meta">
              <div class="pill">Audit</div>
              <a href="projects/cyber/project1.html" class="pill" style="text-decoration:none;color:var(--muted)">Voir ‚Üí</a>
              </div>
            </article>

          <article class="card">
            <img src="https://images.unsplash.com/photo-1548092372-0d1bd40894a3?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=2070" alt="Pentest Web">
            <h3>PROJETS 2</h3>
            <p>Audit et rapport d'une application web vuln√©rable ‚Äî d√©couverte et rem√©diations.</p>
            <div class="meta">
              <div class="pill">S√©curit√©</div>
              <a href="projects/cyber/project2.html" class="pill" style="text-decoration:none;color:var(--muted)">Voir ‚Üí</a>
            </div>
          </article>

          <article class="card">
            <img src="https://plus.unsplash.com/premium_photo-1714618828448-abf8732500c6?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=2100" alt="Hardening">
            <h3>PROJETS 3</h3>
            <p>Checklist et scripts pour durcir des machines Linux (SSH, permissions, audit).</p>
            <div class="meta"><div class="pill">Outils</div><a href="projects/cyber/project3.html" class="pill" style="text-decoration:none;color:var(--muted)">Voir ‚Üí</a></div>
          </article>

          <!-- more placeholders to show scrolling -->
          <article class="card">
            <img src="https://images.unsplash.com/photo-1614064548237-096f735f344f?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=2070" alt="Forensics">
            <h3>PROJETS 4</h3>
            <p>Analyse basique de logs et artefacts suite √† compromission simul√©e.</p>
            <div class="meta"><div class="pill">Forensics</div><a href="projects/cyber/project4.html" class="pill" style="text-decoration:none;color:var(--muted)">Voir ‚Üí</a></div>
          </article>

        </div>
      </div>

    </section>

    <!-- Veille -->
    <section id="veille" class="mt-28">
      <h2 class="reveal">Veille</h2>
      <p class="lead reveal">Flux RSS agr√©g√©s automatiquement ‚Äî derniers articles r√©cents.</p>

      <div style="display:flex;align-items:center;justify-content:space-between;margin-top:12px;gap:12px">
        <div id="veilleStatus" class="muted">Chargement des flux‚Ä¶</div>
        <div>
          <button id="refreshFeeds" class="secondary">Actualiser</button>
        </div>
      </div>

      <div id="veilleNews" style="margin-top:12px" aria-live="polite"></div>
    </section>

    <!-- About -->
    <section id="about" style="margin-top:28px">
      <h2 class="reveal">√Ä propos</h2>
      <div class="about-grid" style="margin-top:12px">
        <div class="reveal">
          <p style="color:var(--muted)">Je suis en BTS SIO, option SISR. J'aime concevoir des solutions simples et robustes, automatiser les t√¢ches r√©p√©titives, et partager mes d√©couvertes techniques via des veilles.</p>
          <ul style="color:var(--muted)">
            <li>Comp√©tences : administration Linux, VLAN, scripting, HTML/CSS/JS</li>
            <li>Logiciels : VIF, outils d'administration, Git</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" style="margin-top:28px">
      <h2 class="reveal">Contact</h2>
      <div style="display:grid;grid-template-columns:1fr 320px;gap:18px;margin-top:12px">
        <form class="reveal" onsubmit="submitForm(event)">
          <input type="text" id="name" placeholder="Ton nom" required>
          <input type="email" id="email" placeholder="Ton email" required>
          <input type="text" id="subject" placeholder="Sujet">
          <textarea id="message" rows="6" placeholder="Ton message"></textarea>
          <div style="display:flex;gap:10px">
            <button class="primary" type="submit">Envoyer</button>
            <button class="secondary" type="button" onclick="copyEmail()">Copier mon email</button>
          </div>
        </form>
        <aside class="profile reveal" style="padding:18px">
          <div style="font-weight:700">Coordonn√©es</div>
          <div style="color:var(--muted);margin-top:8px">Email : <a href="mailto:angelino.ferreira1@gmail.com" style="color:var(--muted);text-decoration:underline">angelino.ferreira1@gmail.com</a></div>
          <div style="color:var(--muted);margin-top:6px">GitHub : <a href="https://github.com/4N63L1N0" style="color:var(--muted);text-decoration:underline">github.com/4N63L1N0</a></div>
          <div style="color:var(--muted);margin-top:6px">LinkedIn : <a href="#" style="color:var(--muted);text-decoration:underline">linkedin.com/in/Ang√©lino FERREIRA</a></div>
        </aside>
      </div>
    </section>

    <footer>
      <div>¬© <span id="year"></span> Ang√©lino ‚Äî Portfolio BTS SIO</div>
    
  <div style="text-align:center;margin-top:10px;">
    <a href="remerciements.html" class="navbtn" style="display:inline-block;margin-top:8px;">Remerciements üôè</a>
  </div>

</footer>
  </div>

  <script>
(function(){
  'use strict';

  // util
  const $ = (sel, ctx = document) => ctx.querySelector(sel);
  const $$ = (sel, ctx = document) => Array.from(ctx.querySelectorAll(sel));

  // --- Parallax / UI code (unchanged, consolidated) ---
  let pointer = { x: 0, y: 0, cx: 0, cy: 0 }, blobs = [], hero, profile;
  let rafId = null;
  function applyTransforms(){
    blobs.forEach((b,i) => {
      const depth = (i+1)*6;
      b.style.transform = `translate3d(${pointer.x*depth}px, ${pointer.y*depth}px, 0)`;
    });
    if (hero) hero.style.transform = `translate3d(${pointer.cx*0.01}px, ${pointer.cy*0.01}px, 0)`;
    if (profile) profile.style.transform = `translate3d(${pointer.cx*0.008}px, ${pointer.cy*0.008}px, 0)`;
    rafId = null;
  }
  function scheduleRaf(){ if (rafId == null) rafId = requestAnimationFrame(applyTransforms); }

  // --- RSS / Veille aggregator ------------------------------------------------
  // Configure your feeds here (public RSS/Atom URLs)
  const FEEDS = [
    'https://rss.slashdot.org/Slashdot/slashdot',
    'https://www.zdnet.com/topic/security/rss.xml',
    'https://www.reddit.com/r/sysadmin/.rss'
  ];
  const CACHE_KEY = 'veille_cache_v1';
  const CACHE_TTL_MS = 30 * 60 * 1000; // 30 minutes
  const PROXY_RAW = url => 'https://api.allorigins.win/raw?url=' + encodeURIComponent(url);

  function saveCache(data){
    try { localStorage.setItem(CACHE_KEY, JSON.stringify({ ts: Date.now(), data })); } catch(e){}
  }
  function loadCache(){
    try {
      const raw = localStorage.getItem(CACHE_KEY);
      if (!raw) return null;
      const o = JSON.parse(raw);
      if (Date.now() - o.ts > CACHE_TTL_MS) { localStorage.removeItem(CACHE_KEY); return null; }
      return o.data;
    } catch { return null; }
  }

  async function fetchFeedRaw(url){
    const proxy = PROXY_RAW(url);
    const res = await fetch(proxy);
    if (!res.ok) throw new Error('Fetch failed: ' + res.status);
    return res.text();
  }

  function parseFeed(xmlText, sourceUrl){
    const parser = new DOMParser();
    const doc = parser.parseFromString(xmlText, 'application/xml');
    if (doc.querySelector('parsererror')) throw new Error('Invalid XML from ' + sourceUrl);

    const items = [];
    const rssItems = doc.querySelectorAll('item');
    const atomItems = doc.querySelectorAll('entry');

    const mapNode = (node) => {
      const title = (node.querySelector('title') || { textContent: '' }).textContent.trim();
      // link: RSS item may have <link>text</link> or <link><a/></link>, Atom has <link href="">
      let link = '';
      const linkHref = node.querySelector('link[href]');
      if (linkHref && linkHref.getAttribute) link = linkHref.getAttribute('href') || '';
      if (!link) {
        const linkEl = node.querySelector('link');
        if (linkEl) {
          link = (linkEl.getAttribute && linkEl.getAttribute('href')) || linkEl.textContent.trim() || '';
        }
      }
      // fallback to guid
      if (!link) {
        const guid = node.querySelector('guid');
        link = guid ? guid.textContent.trim() : '';
      }
      const pubNode = node.querySelector('pubDate, updated, published');
      const pubDate = pubNode ? new Date(pubNode.textContent.trim()).toISOString() : null;
      const descNode = node.querySelector('description, summary, content');
      // simple excerpt and strip tags
      const excerptRaw = descNode ? descNode.textContent.trim() : '';
      const excerpt = excerptRaw.replace(/\s+/g,' ').slice(0, 280);
      return { title, link, pubDate, excerpt, source: sourceUrl };
    };

    if (rssItems.length) rssItems.forEach(n => items.push(mapNode(n)));
    else if (atomItems.length) atomItems.forEach(n => items.push(mapNode(n)));

    return items;
  }

  function timeAgo(iso){
    if (!iso) return '';
    const d = new Date(iso);
    const s = Math.floor((Date.now() - d.getTime())/1000);
    if (s < 60) return `${s}s`;
    if (s < 3600) return `${Math.floor(s/60)}m`;
    if (s < 86400) return `${Math.floor(s/3600)}h`;
    return `${Math.floor(s/86400)}j`;
  }
  function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

  function renderItems(items, container){
    if (!items || !items.length){
      container.innerHTML = `<div class="muted">Aucun article trouv√© pour le moment.</div>`;
      return;
    }
    const html = items.map(it => {
      const when = it.pubDate ? `<span class="muted" style="font-size:12px;margin-left:8px">${timeAgo(it.pubDate)}</span>` : '';
      return `<article class="note" style="margin-bottom:10px">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <a href="${escapeHtml(it.link)}" target="_blank" rel="noopener noreferrer" style="font-weight:700;color:inherit;text-decoration:underline">${escapeHtml(it.title)}</a>
          ${when}
        </div>
        ${ it.excerpt ? `<div class="muted" style="margin-top:6px">${escapeHtml(it.excerpt)}</div>` : '' }
      </article>`;
    }).join('');
    container.innerHTML = html;
  }

  async function aggregateFeeds(force = false){
    const statusEl = $('#veilleStatus');
    const outEl = $('#veilleNews');
    if (!statusEl || !outEl) return;
    statusEl.textContent = 'Chargement des flux‚Ä¶';

    if (!force) {
      const cached = loadCache();
      if (cached) {
        renderItems(cached, outEl);
        statusEl.textContent = `Dernier cache : ${new Date(cached._cachedAt).toLocaleTimeString()}`;
        return;
      }
    }

    try {
      const all = [];
      const tasks = FEEDS.map(async (f) => {
        try {
          const txt = await fetchFeedRaw(f);
          const items = parseFeed(txt, f);
          return items;
        } catch (err) {
          console.warn('Feed error', f, err);
          return [];
        }
      });
      const results = await Promise.all(tasks);
      results.forEach(arr => all.push(...arr));
      const normalized = all
        .map(i => ({ ...i, pubDate: i.pubDate ? new Date(i.pubDate).toISOString() : null }))
        .filter(i => i.title && i.link)
        .sort((a,b) => (b.pubDate || '').localeCompare(a.pubDate || ''));
      const top = normalized.slice(0, 12);
      top._cachedAt = Date.now();
      try { saveCache(top); } catch(e){}
      renderItems(top, outEl);
      statusEl.textContent = `Mis √† jour: ${new Date().toLocaleTimeString()}`;
    } catch (err) {
      console.error('Erreur agr√©gation flux:', err);
      statusEl.textContent = 'Erreur chargement des flux. Voir console.';
    }
  }

  // --- Core DOM ready and glue (menu, carousels, events, parallax) -----------
  document.addEventListener('DOMContentLoaded', () => {
    try {
      // year
      $('#year').textContent = new Date().getFullYear();

      // reveal observer
      const obs = new IntersectionObserver((entries) => {
        entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('show'); });
      }, { threshold: 0.12 });
      $$('.reveal').forEach(el => obs.observe(el));

      // nav delegation
      document.addEventListener('click', (ev) => {
        const a = ev.target.closest('a.navbtn');
        if (!a) return;
        const href = a.getAttribute('href') || '';
        if (href.startsWith('#')) {
          ev.preventDefault();
          const id = href.slice(1);
          const el = document.getElementById(id);
          if (el) el.scrollIntoView({ behavior: 'smooth' });
        } else {
          const navLinksEl = $('#navLinks');
          if (window.innerWidth <= 640 && navLinksEl) {
            navLinksEl.style.display = 'none';
            navLinksEl.setAttribute('aria-hidden','true');
            $('#menuBtn')?.setAttribute('aria-expanded','false');
          }
        }
      });

      // carousels keyboard + wheel
      $$('.cards-scroll').forEach(row => {
        row.tabIndex = 0;
        row.addEventListener('keydown', (e) => {
          if (e.key === 'ArrowRight') row.scrollBy({ left: 300, behavior: 'smooth' });
          if (e.key === 'ArrowLeft') row.scrollBy({ left: -300, behavior: 'smooth' });
        });
        row.addEventListener('wheel', (e) => {
          if (Math.abs(e.deltaX) < Math.abs(e.deltaY)) {
            e.preventDefault(); row.scrollBy({ left: e.deltaY, behavior: 'auto' });
          }
        }, { passive: false });
      });

      // mobile menu
      const menuBtn = $('#menuBtn');
      const navLinks = $('#navLinks');
      if (menuBtn && navLinks) {
        menuBtn.setAttribute('aria-expanded','false');
        menuBtn.addEventListener('click', () => {
          const open = menuBtn.getAttribute('aria-expanded') === 'true';
          menuBtn.setAttribute('aria-expanded', String(!open));
          if (!open) {
            navLinks.style.display = 'flex';
            navLinks.style.flexDirection = 'column';
            navLinks.style.background = 'linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))';
            navLinks.style.padding = '10px';
            navLinks.style.borderRadius = '10px';
            navLinks.setAttribute('aria-hidden','false');
          } else {
            navLinks.style.display = 'none';
            navLinks.setAttribute('aria-hidden','true');
          }
        });
        let resizeTimeout;
        window.addEventListener('resize', () => {
          clearTimeout(resizeTimeout);
          resizeTimeout = setTimeout(() => {
            if (window.innerWidth > 640) {
              navLinks.style.display = 'flex';
              navLinks.style.flexDirection = 'row';
              navLinks.style.background = 'transparent';
              navLinks.style.padding = '';
              navLinks.setAttribute('aria-hidden','false');
              menuBtn.setAttribute('aria-expanded','false');
            } else {
              navLinks.style.display = 'none';
              navLinks.setAttribute('aria-hidden','true');
            }
          }, 120);
        });
        if (window.innerWidth <= 640) {
          navLinks.style.display = 'none';
          navLinks.setAttribute('aria-hidden','true');
        }
      }

      // parallax elements
      blobs = $$('.bg-blob');
      hero = $('#heroCard');
      profile = $('#profileCard');
      document.addEventListener('mousemove', (e) => {
        pointer.x = (e.clientX / window.innerWidth) - 0.5;
        pointer.y = (e.clientY / window.innerHeight) - 0.5;
        const rect = document.body.getBoundingClientRect();
        pointer.cx = e.clientX - rect.left - window.innerWidth / 2;
        pointer.cy = e.clientY - rect.top - window.innerHeight / 2;
        scheduleRaf();
      });

      // Attach refresh button for RSS
      const refreshBtn = $('#refreshFeeds');
      if (refreshBtn) refreshBtn.addEventListener('click', () => {
        try { localStorage.removeItem(CACHE_KEY); } catch(e){}
        aggregateFeeds(true);
      });

      // initial feed load
      aggregateFeeds();

    } catch (err) {
      console.error('Erreur initialisation JS:', err);
    }
  });

  // --- simple helpers for contact / copy / download (unchanged) --------------
  window.submitForm = function(e){
    e.preventDefault();
    try {
      const data = { name: $('#name').value||'', email: $('#email').value||'', subject: $('#subject').value||'', message: $('#message').value||'' };
      alert('Message simul√© envoy√© ‚Äî ' + data.name + "\nJe peux t'aider √† connecter un vrai formulaire si tu veux.");
      e.target.reset();
    } catch (err) { console.error(err); alert('Erreur lors de l\'envoi.'); }
  };

  window.copyEmail = function(){
    const email = 'angelino.ferreira1@gmail.com';
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(email).then(()=> alert('Email copi√© dans le presse-papier')).catch(()=> fallbackCopy(email));
    } else fallbackCopy(email);
    function fallbackCopy(text){
      const t = document.createElement('textarea'); t.value = text; t.setAttribute('readonly',''); t.style.position='absolute'; t.style.left='-9999px';
      document.body.appendChild(t); t.select();
      try { document.execCommand('copy'); alert('Email copi√© dans le presse-papier'); } catch { alert('Impossible de copier : ' + text); }
      finally { document.body.removeChild(t); }
    }
  };

  window.downloadCV = function(ev){
    ev && ev.preventDefault();
    const url = 'cv.pdf';
    fetch(url, { method: 'HEAD' }).then(r => {
      if (r.ok) location.href = url;
      else alert('Aucun CV d√©tect√© (cv.pdf manquant).');
    }).catch(()=> alert('T√©l√©chargement simul√© ‚Äî ajoute cv.pdf √† la racine.'));
  };

})();
  </script>
</body>
</html>
